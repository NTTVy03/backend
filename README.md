# TODO Backend in Rust

## 1. About project
* Language: Rust (rustup 1.27.1; rustc 1.79.0)
* Framework: actix-web - diesel (detail in `Cargo.toml`)
* Database: Postgres (hosted by Render)

## 2. Project structure

```
my_project/
├── Cargo.toml
├── src/
│   ├── main.rs
│   ├── config.rs
│   ├── lib.rs
│   ├── routes/
│   │   ├── mod.rs
│   │   ├── todos.rs
│   ├── models/
│   │   ├── mod.rs
│   │   ├── todo.rs
│   ├── schema.rs
│   ├── services/
│   │   ├── mod.rs
│   │   ├── todo_service.rs
│   ├── db/
│   │   ├── mod.rs
│   │   ├── connection.rs
│   └── errors/
│       ├── mod.rs
│       ├── app_error.rs
├── migrations/
│   └── (migration files)
├── .env
└── .gitignore

```

* `Cargo.toml`: Defines project dependencies, version, and other metadata.
* `src/main.rs`: The entry point of the application. Configures the Actix server, sets up routes, and starts the server.
* `src/config.rs`: Handles configuration, such as environment variables, database settings, etc.
* `src/lib.rs`: Serves as the central point to re-export modules and functionalities for easy access.
* `src/routes/`: Contains route handlers for different parts of your API. Each file/module typically corresponds to a different resource (e.g., todos, users).
* `src/models/`: Defines data models that represent your database tables. Each file/module corresponds to a different database table.
* `src/schema.rs`: Auto-generated by Diesel to define the database schema.
* `src/services/`: Contains business logic and service functions. This layer typically interacts with the database through models.
* `src/db/`: Contains database-related code, such as connection pooling and migrations.
* `src/errors/`: Defines custom error types and error handling utilities.
* `migrations/`: Contains Diesel migration files for database schema changes.
* `.env`: Stores environment variables, such as database URLs and other configurations.

### Notes:
* `test/`
    * Install the extension `REST Client` in VSCode (extension id = humao.rest-client) 
    * A quick way to test API that the backend provides
    * Modify the requests in `test/` (if needed) and click `Send Request`
* `.env`
    ```
    DATABASE_URL=<local/hosted database url>
    SERVER_ADDR=0.0.0.0:8088
    ```
* `build.sh`: Build backend, install and setup `diesel`
* `diesel.toml`
    * Automatically created by `diesel`
    * Replace migration directory with a relative path

## 3. How to run
```
cd rust-todo/backend
cargo run
```